# Alpine with only C compiler - for testing C version
FROM alpine:latest

# Install build tools (C compiler and make)
RUN apk add --no-cache \
    gcc \
    make \
    musl-dev

# Remove package manager to simulate minimal system
RUN rm -rf /sbin/apk /sbin/apk.static /usr/bin/apk /usr/bin/apk.static /etc/apk
RUN rm -rf /var/cache/apk

WORKDIR /root

# Copy TSI source
COPY . /root/tsi-source/

WORKDIR /root/tsi-source

CMD ["/bin/sh"]

